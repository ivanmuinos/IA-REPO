@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: #ffffff;
    --foreground: #333333;
    --card: #ffffff;
    --card-foreground: #333333;
    --popover: #ffffff;
    --popover-foreground: #333333;
    --primary: #1855a3;
    --primary-foreground: #ffffff;
    --secondary: #e8f0f8;
    --secondary-foreground: #3a4a5b;
    --muted: #f9fafb;
    --muted-foreground: #6b7280;
    --accent: #ddebf7;
    --accent-foreground: #12427e;
    --destructive: #ef4444;
    --destructive-foreground: #ffffff;
    --border: #e5e7eb;
    --input: #e5e7eb;
    --ring: #1855a3;
    --chart-1: #1855a3;
    --chart-2: #4a7bbf;
    --chart-3: #7ba1db;
    --chart-4: #aec8f7;
    --chart-5: #103d7a;
    --sidebar: #f9fafb;
    --sidebar-foreground: #333333;
    --sidebar-primary: #1855a3;
    --sidebar-primary-foreground: #ffffff;
    --sidebar-accent: #ddebf7;
    --sidebar-accent-foreground: #12427e;
    --sidebar-border: #e5e7eb;
    --sidebar-ring: #1855a3;
    --font-sans: var(--font-sans), Inter, sans-serif;
    --font-serif: var(--font-serif), Source Serif 4, serif;
    --font-mono: var(--font-mono), JetBrains Mono, monospace;
    --radius: 0.375rem;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 1px 2px -1px hsl(0 0% 0% / 0.10);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 1px 2px -1px hsl(0 0% 0% / 0.10);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 2px 4px -1px hsl(0 0% 0% / 0.10);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 4px 6px -1px hsl(0 0% 0% / 0.10);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 8px 10px -1px hsl(0 0% 0% / 0.10);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);
    --tracking-normal: 0em;
    --spacing: 0.25rem;
  }

  .dark {
    --background: #171717;
    --foreground: #e5e5e5;
    --card: #262626;
    --card-foreground: #e5e5e5;
    --popover: #262626;
    --popover-foreground: #e5e5e5;
    --primary: #4a85d9;
    --primary-foreground: #f0f5ff;
    --secondary: #202a38;
    --secondary-foreground: #e5e5e5;
    --muted: #262626;
    --muted-foreground: #a3a3a3;
    --accent: #2a3b50;
    --accent-foreground: #aec8f7;
    --destructive: #ef4444;
    --destructive-foreground: #ffffff;
    --border: #404040;
    --input: #404040;
    --ring: #4a85d9;
    --chart-1: #4a85d9;
    --chart-2: #3a6cb0;
    --chart-3: #2a5387;
    --chart-4: #1a3a5e;
    --chart-5: #7ba1db;
    --sidebar: #171717;
    --sidebar-foreground: #e5e5e5;
    --sidebar-primary: #4a85d9;
    --sidebar-primary-foreground: #f0f5ff;
    --sidebar-accent: #2a3b50;
    --sidebar-accent-foreground: #aec8f7;
    --sidebar-border: #404040;
    --sidebar-ring: #4a85d9;
    --font-sans: var(--font-sans), Inter, sans-serif;
    --font-serif: var(--font-serif), Source Serif 4, serif;
    --font-mono: var(--font-mono), JetBrains Mono, monospace;
    --radius: 0.375rem;
    --shadow-2xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-xs: 0 1px 3px 0px hsl(0 0% 0% / 0.05);
    --shadow-sm: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 1px 2px -1px hsl(0 0% 0% / 0.10);
    --shadow: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 1px 2px -1px hsl(0 0% 0% / 0.10);
    --shadow-md: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 2px 4px -1px hsl(0 0% 0% / 0.10);
    --shadow-lg: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 4px 6px -1px hsl(0 0% 0% / 0.10);
    --shadow-xl: 0 1px 3px 0px hsl(0 0% 0% / 0.10), 0 8px 10px -1px hsl(0 0% 0% / 0.10);
    --shadow-2xl: 0 1px 3px 0px hsl(0 0% 0% / 0.25);
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);
  --font-serif: var(--font-serif);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);

  --shadow-2xs: var(--shadow-2xs);
  --shadow-xs: var(--shadow-xs);
  --shadow-sm: var(--shadow-sm);
  --shadow: var(--shadow);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);
  --shadow-2xl: var(--shadow-2xl);
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Estilos para el canvas de flujo */
.canvas-grid {
  position: relative;
}

.bg-grid-pattern {
  background-image: linear-gradient(to right, rgba(0, 0, 0, 0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0, 0, 0, 0.05) 1px, transparent 1px);
  background-size: 20px 20px;
}

/* Estilos para los nodos */
.flow-node {
  transition: all 0.2s ease;
}

.flow-node:hover {
  box-shadow: 0 0 0 2px hsl(var(--primary));
}

/* Estilos para las conexiones */
.flow-connector {
  stroke: hsl(var(--muted-foreground));
  stroke-width: 1.5;
  fill: none;
  transition: stroke 0.2s ease, stroke-width 0.2s ease;
}

.flow-connector:hover {
  stroke: hsl(var(--primary));
  stroke-width: 2;
}

/* Estilos para los puntos de conexión */
.connection-point {
  fill: hsl(var(--primary));
  stroke: white;
  stroke-width: 1;
  cursor: crosshair;
  transition: transform 0.2s ease;
}

.connection-point:hover {
  transform: scale(1.5);
}

/* Estilos para nodos con errores */
.flow-node-error {
  border-color: hsl(var(--destructive));
}

.flow-node-warning {
  border-color: orange;
}

/* Animación para conexiones condicionales */
.flow-connector-animated {
  stroke-dasharray: 5, 5;
  animation: dash 1s linear infinite;
}

@keyframes dash {
  to {
    stroke-dashoffset: -10;
  }
}

/* Estilos para las conexiones del flujo */
.react-flow__edge {
  pointer-events: all;
}

.react-flow__edge:hover {
  z-index: 1000;
}

.react-flow__edge:hover .react-flow__edge-path {
  stroke-width: 3;
  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.3));
}

.react-flow__edge-path {
  transition: stroke-width 0.2s, filter 0.2s;
}

.react-flow__edge-text {
  background-color: white;
  padding: 2px 4px;
  border-radius: 4px;
  font-size: 10px;
  pointer-events: none;
  filter: drop-shadow(0 0 1px rgba(0, 0, 0, 0.2));
}

/* Mejorar la visibilidad de los handles de conexión */
.react-flow__handle {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: hsl(var(--primary));
  border: 2px solid white;
  transition: transform 0.2s, background-color 0.2s;
}

.react-flow__handle:hover {
  transform: scale(1.5);
  background-color: hsl(var(--primary));
}

/* CORRECCIÓN DE SCROLL SECTIONS */
.section {
  scroll-margin-top: 80px; /* Ajustar según altura del header */
}

/* Si usas IDs para navegación */
#solution,
#features, 
#coverage,
#impact,
#blog {
  scroll-margin-top: 80px;
}

/* Alternativa con padding-top invisible */
.section::before {
  content: '';
  display: block;
  height: 80px;
  margin-top: -80px;
  visibility: hidden;
}

/* Para smooth scroll */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px;
}

/* Asegurar que el header no bloquee contenido */
.header {
  position: fixed;
  z-index: 1000;
  height: 64px; /* Ajustar a altura real */
}

/* Eliminado: margin-top conflictivo que causaba espacio adicional */

/* Correcciones específicas para el layout actual */
/* TopBar fijo con h-16 (64px) */
.top-bar-fixed {
  position: sticky;
  top: 0;
  z-index: 50;
  height: 64px;
}

/* Ajuste para el contenido principal con TopBar fijo */
.main-with-topbar {
  padding-top: 64px; /* Altura del TopBar */
}

/* Para navegación interna con TopBar fijo */
.scroll-target {
  scroll-margin-top: 80px; /* TopBar (64px) + margen adicional (16px) */
}

/* Smooth scroll mejorado */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px;
}

/* Asegurar que las secciones no se oculten bajo el TopBar */
section[id],
div[id] {
  scroll-margin-top: 80px;
}

/* Para elementos con clase section */
.section {
  scroll-margin-top: 80px;
}

/* Correcciones específicas para el layout con TopBar + BreadcrumbNav */
/* TopBar: h-16 (64px) + BreadcrumbNav: py-4 (32px) = 96px total */
.scroll-with-breadcrumb {
  scroll-margin-top: 96px;
}

/* Para navegación interna considerando TopBar + BreadcrumbNav */
.scroll-target-with-nav {
  scroll-margin-top: 96px;
}

/* Ajuste para elementos que necesitan estar visibles bajo la navegación */
.visible-under-nav {
  padding-top: 96px;
}

/* Para elementos que necesitan scroll-margin considerando toda la navegación */
.scroll-section {
  scroll-margin-top: 96px;
}

/* Smooth scroll con padding ajustado para toda la navegación */
html {
  scroll-behavior: smooth;
  scroll-padding-top: 96px;
}

/* Asegurar altura completa del sidebar */
.sidebar-full-height {
  height: 100vh;
  height: 100dvh; /* Para dispositivos móviles */
}

/* Layout principal con altura completa */
.layout-full-height {
  height: 100vh;
  height: 100dvh;
  display: flex;
  flex-direction: column;
}

/* Contenedor principal con flex */
.main-container {
  flex: 1;
  display: flex;
  overflow: hidden;
}

/* Sidebar con altura completa */
.sidebar-container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* Contenido principal con scroll */
.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.main-content-scroll {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

/* Espaciado consistente para breadcrumb - AHORA USANDO py-1.5 DIRECTAMENTE */
